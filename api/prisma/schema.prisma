generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserRole {
  CLIENT
  ADMIN
}

model User {
  id           Int       @id @default(autoincrement())
  firstName    String
  lastName     String
  email        String    @unique
  phone        String?   @unique
  passwordHash String    // mot de passe hashÃ© 
  role         UserRole  @default(CLIENT)
  isActive     Boolean   @default(true)

  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Category {
  id          Int       @id @default(autoincrement())
  name        String
  slug        String    @unique
  description String?
  order       Int       @default(0)
  isActive    Boolean   @default(true)

  services    Service[]
}

model Service {
  id               Int             @id @default(autoincrement())
  name             String
  slug             String          @unique
  shortDescription String?
  description      String?
  imageUrl         String?
  isFeatured       Boolean         @default(false)
  isActive         Boolean         @default(true)
  orderInCategory  Int             @default(0)

  // ðŸ’° Prix stockÃ© en centimes (ex : 12000 = 120,00 â‚¬)
  priceCents       Int?
  durationMinutes  Int?

  categoryId Int
  category   Category      @relation(fields: [categoryId], references: [id])

  options    ServiceOption[]
}

model ServiceOption {
  id        Int     @id @default(autoincrement())
  name      String
  duration  Int?

  // ðŸ’° Prix option en centimes
  priceCents Int

  serviceId Int
  service   Service @relation(fields: [serviceId], references: [id])
}
